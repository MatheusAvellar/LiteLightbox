document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("dialog");if(e.id="llb-dialog","function"!=typeof e.showModal)return void console.warn("[LiteLightbox] The <dialog> API is not supported by this browser.");const t=document.createElement("form");t.method="dialog",t.id="llb-dialogform";const n=document.createElement("div");n.id="llb-top-right-controls-wrapper",t.appendChild(n);const o=document.createElement("button");o.id="llb-closebtn",o.textContent="Close image dialog.",n.appendChild(o);const l=document.createElement("a");l.id="llb-openbtn",l.textContent="Open full image",n.appendChild(l);const d=document.createElement("button");d.id="llb-prevbtn",d.textContent="Previous image",t.appendChild(d);const i=document.createElement("button");i.id="llb-nextbtn",i.textContent="Next image",t.appendChild(i),e.appendChild(t);const a=document.createElement("figure");a.id="llb-figure";const c=document.createElement("div");c.id="llb-media";const r=document.createElement("figcaption");r.id="llb-figcaption",a.appendChild(c),a.appendChild(r),e.appendChild(a),document.body.appendChild(e);for(const e of[...document.querySelectorAll("[data-llb-src]")])e.addEventListener("click",function(t){return t.preventDefault(),u(e),!1});const s={keyDown:!1,goPrev:null,goNext:null};function u(t){let n=t.dataset,o=n.llbSrc;"href"===o&&(o=t.href);const p=document.createElement("img");p.src=o;const f=t.firstElementChild;"llbAlt"in n?p.alt=n.llbAlt:f&&"alt"in f&&(p.alt=f.alt),p.addEventListener("load",function(){a.dataset.loaded=!0}),p.addEventListener("error",function(){a.dataset.loaded=!0}),c.appendChild(p);const h=t.nextElementSibling;if(h&&"llbCaption"in h.dataset)for(const e of[...h.cloneNode(!0).childNodes])r.appendChild(e);if(l.href=o,"llbGallery"in n){const e=[...document.querySelectorAll("[data-llb-gallery]")];let n=!1,o=null,l=null;for(const d of e)if(d!==t){if(n){l=d;break}o=d}else n=!0;d.className=o?"shown":"",i.className=l?"shown":"",d.onclick=s.goPrev=o?e=>(e&&e.preventDefault(),m(),u(o),!1):null,i.onclick=s.goNext=l?e=>(e&&e.preventDefault(),m(),u(l),!1):null}else d.className="",i.className="",d.onclick=s.goPrev=null,i.onclick=s.goNext=null;document.body.classList.add("llb-modal"),e.showModal(),window.history.pushState({},"","#lightbox")}function m(){for([...c.children].forEach(e=>e.remove()),a.dataset.loaded=!1;r.childNodes.length;)r.childNodes[0].remove();l.href=""}window.addEventListener("popstate",t=>{e.close()}),window.addEventListener("keydown",e=>{e.isComposing||229===e.keyCode||s.keyDown||("ArrowLeft"===e.key&&"function"==typeof s.goPrev&&(s.goPrev(),s.keyDown=!0),"ArrowRight"===e.key&&"function"==typeof s.goNext&&(s.goNext(),s.keyDown=!0))}),window.addEventListener("keyup",e=>{e.isComposing||229===e.keyCode||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(s.keyDown=!1)}),e.addEventListener("close",()=>{m(),document.body.classList.remove("llb-modal"),"#lightbox"==location.hash&&window.history.replaceState({},"","#")})});